---
layout: post
title:  "5G NR物理层基础2（下行物理信道与信号）"
date:   2025-08-22 00:00:00
categories: NR
tags: 读书笔记
excerpt: 从数据链路层出发，经常接触到的一些物理层基本概念汇总
mathjax: true
---
* content
{:toc}
---

![KYHHbj.png](https://s2.ax1x.com/2019/10/23/KYHHbj.png)



> [博客地址](https://dufaxing.com){:target="_blank"}


# 0. 前言

从数据链路层开发者的角度出发，总结经常遇到的下行物理信道与信号一些基本概念。

---

# 1.物理信道

## 1.1 PDSCH
    

**物理下行共享信道** ：这是承载下行用户数据（来自的RLC/MAC）的核心信道。主要处理流程：加扰、调制、层映射、预编码、资源映射等。


## 1.2 PDCCH

**物理下行控制信道**：这是网络驱动UE的MAC层的主要的方式。因为它携带**DCI**，告诉UE在何处（时频资源）、以何种格式（MCS）、如何（HARQ信息）接收PDSCH或发送PUSCH。物理层需要持续监听PDCCH。

## 1.3 PBCH

**物理广播信道**：承载UE接入网络所必须的部分关键系统信息。

---

# 2 DCI

DCI：Downlink Control Information，这非常重要，作为数据链路层的开发者，最需要了解的是网络指示UE发送/接收数据时间点。


```mermaid
flowchart TD
A[DCI格式] --> B[下行调度]
A --> C[上行调度]
A --> D[组公共调度]

B --> B1[格式 1_0<br>紧凑下行调度<br>]
B --> B2[格式 1_1<br>标准下行调度<br>]

C --> C1[格式 0_0<br>紧凑上行调度<br>]
C --> C2[格式 0_1<br>标准上行调度<br>]

D --> D1[格式 2_0<br>时隙格式指示]
D --> D2[格式 2_1<br>抢占指示]
D --> D3[格式 2_2<br>上行功控指令]
D --> D4[格式 2_3<br>上行功控指令]

B1 -.->|常用 RNTI| R1[C-RNTI, CS-RNTI<br>SI-RNTI, P-RNTI...]
B2 -.->|常用 RNTI| R2[C-RNTI, CS-RNTI]

C1 -.->|常用 RNTI| R3[C-RNTI, TC-RNTI]
C2 -.->|常用 RNTI| R4[C-RNTI]

D1 -.->|专用 RNTI| R5[SFI-RNTI]
D2 -.->|专用 RNTI| R6[INT-RNTI]
D3 -.->|专用 RNTI| R7[TPC-PUSCH-RNTI]
D4 -.->|专用 RNTI| R8[TPC-PUCCH-RNTI]
```

## 2.1 主要 DCI 格式功能说明

### 2.1.1 下行调度 (Downlink Assignments)

用于指示UE在何处接收PDSCH数据。

-   **DCI Format 1\_0**：**紧凑下行调度**
    
    -   **功能**：用于调度PDSCH。它包含最精简的必要信息字段，开销小。
        
    -   **场景**：
        
        -   **初始接入**：在随机接入过程中，由TC-RNTI加扰。
            
        -   **系统消息调度**：由SI-RNTI加扰，通知调度SIB1或其他SIB的PDSCH。
            
        -   **寻呼消息调度**：由P-RNTI加扰，通知调度寻呼消息的PDSCH。
            
        -   **常规调度**：也可由C-RNTI或CS-RNTI加扰，进行简单的数据调度。
            
    -   **特点**：信息字段大小固定，UE已知，便于盲检。
        
-   **DCI Format 1\_1**：**标准下行调度**
    
    -   **功能**：用于调度PDSCH。它包含比1\_0更丰富的信息，支持5G的高级特性。
        
    -   **场景**：由C-RNTI或CS-RNTI加扰，用于UE常规数据业务的调度。
        
    -   **额外信息（相比1\_0）**：
        
        -   **载波指示**：在载波聚合（CA）时指示哪个成员载波。
            
        -   **带宽部分（BWP）指示**：指示激活哪个BWP。
            
        -   **MIMO相关**：包含层数、预编码、天线端口等用于空间复用的信息。
            
        -   **CBG（CodeBlock Group）传输**：支持基于码块组的重传。
            
    -   **特点**：字段大小可配置，功能更强大，是下行数据调度的主力。
        

### 2.2.2 上行调度 (Uplink Grants)

用于指示UE在何处以及如何发送PUSCH数据。

-   **DCI Format 0\_0**：**紧凑上行调度**
    
    -   **功能**：用于调度PUSCH。与1\_0类似，是最精简的上行授权。
        
    -   **场景**：
        
        -   **初始接入**：在随机接入MSG3发送过程，由TC-RNTI加扰。
            
        -   **常规调度**：由C-RNTI加扰，进行简单的上行数据发送。
            
    -   **特点**：信息字段大小固定，通常与DCI 1\_0大小相同，便于UE盲检（减少检测次数）。
        
-   **DCI Format 0\_1**：**标准上行调度**
    
    -   **功能**：用于调度PUSCH。支持5G上行高级特性。
        
    -   **场景**：由C-RNTI加扰，用于UE常规上行数据业务的调度。
        
    -   **额外信息（相比0\_0）**：
        
        -   **载波指示**：用于上行CA。
            
        -   **BWP指示**：指示上行BWP。
            
        -   **MIMO相关**：支持上行传输预编码和MIMO。
            
        -   **CSI请求**：指示UE在发送PUSCH时一并上报信道状态信息（CSI）。
            
    -   **特点**：字段大小可配置，是上行数据调度的主力。
        

### 2.1.3 组公共（Group-Common）DCI格式

这些DCI不是发给某个特定UE，而是发给**一组UE**的，由特定的RNTI加扰。

-   **DCI Format 2\_0**：**时隙格式指示（SFI - Slot Format Indicator）**
    
    -   **功能**：动态指示一个或多个时隙中每个符号的方向（下行、上行、灵活）。
        
    -   **RNTI**：SFI-RNTI。
        
    -   **作用**：避免上下行干扰，特别是在TDD系统中实现动态时隙结构。
        
-   **DCI Format 2\_1**：**抢占指示（Preemption Indication）**
    
    -   **功能**：通知UE，之前某个下行传输中的一部分资源可能被高优先级业务（如URLLC）“抢占”了，导致接收错误。UE收到后可以忽略被抢占部分的数据，等待重传。
        
    -   **RNTI**：INT-RNTI。
        
    -   **作用**：保障高可靠性低时延业务，并提升eMBB业务的效率。
        
-   **DCI Format 2\_2**：**用于PUSCH和PUCCH的上行功控（Uplink Power Control）**
    
    -   **功能**：发送传输功率控制（TPC）命令，用于调整一组UE的PUSCH或PUCCH的发射功率。
        
    -   **RNTI**：TPC-PUSCH-RNTI 或 TPC-PUCCH-RNTI。
        
-   **DCI Format 2\_3**：**用于SRS的上行功控**
    
    -   **功能**：发送TPC命令，用于调整一组UE的SRS（探测参考信号）的发射功率。
        
    -   **RNTI**：TPC-SRS-RNTI。




##   2.2 K0：PDSCH时域资源分配偏移量

**定义**

-   **K0** 指的是从**承载DCI（下行授权）的PDCCH所在时隙**到**该DCI所调度的PDSCH（承载下行数据的共享信道）所在时隙**之间的时间偏移。
    
-   **单位是时隙（Slot）**。
    
-   **公式表示**：`PDSCH时隙 = PDCCH时隙 + K0`
    

**具体含义**：  
当UE在一个时隙（记为时隙 `n`）中成功解码出一个下行授权DCI后，这个DCI告诉UE：“我给你调度的下行数据，不在现在这个时隙，而是在未来的 `K0` 个时隙之后，也就是时隙 `n + K0` 中。”


**配置位置**

K0的值并非固定不变，也不是由DCI直接用一个数字字段指示的。它的配置机制更为灵活，涉及以下两层配置：

- 1.  RRC高层信令配置（预定义表格）：
        -   网络通过**RRC连接重配置消息**为UE配置一个或多个 **“PDSCH时域资源分配”表**。这个表是一个列表，其中包含了多行可能的时域参数组合，每一行都定义了一个 `K0` 值以及其他参数（如PDSCH的起始符号和持续长度）。
        - 在38.331协议中 `PDSCH-Config` -> **`pdsch-TimeDomainAllocationList`** 配置，格式如下：
        - ```plaintext
            PDSCH-TimeDomainResourceAllocation ::=   SEQUENCE {
                k0                                      INTEGER(0..32)                                                  OPTIONAL,   -- Need S
                mappingType                             ENUMERATED {typeA, typeB},
                startSymbolAndLength                    INTEGER (0..127)
            }
            ```

- 2. **DCI动态指示（索引）**：
        - 在具体的某个下行授权DCI（如DCI format 1\_0或1\_1）中，会包含一个名为 **“时域资源分配”** 的字段Time domain resource assignment (38212)。这个字段本身**不是一个具体的K0数值**，而是一个**索引（Index）**。
    
        - UE收到DCI后，根据这个索引值，去查询网络通过RRC信令为其配置好的那个“PDSCH时域资源分配”表，从而找到对应的那一行，也就知道了本次传输的具体 `K0`、起始符号和持续时间。
    
        - 例如：如果DCI中的“时域资源分配”字段指示索引为 `2`，UE查表得知 `K0 = 1`。这意味着UE将在当前PDCCH所在时隙的下一个时隙（`n+1`）接收PDSCH。


## 2.3 K1：UE接收PDSCH到发送反馈的时间偏移量

**定义**

-   **K1** 定义了从 **UE接收PDSCH（下行数据）的时刻** 到 **UE发送对应HARQ反馈（ACK/NACK）的时刻** 之间的时间偏移。

-   **它的核心作用是：告诉UE应该在收到数据之后的哪个时间点，向网络汇报“收到下行数据的结果”。**
    
-   **公式表示**：`HARQ-ACK 反馈时隙 = PDSCH 时隙 + K1`

没有K1，网络就无法知道UE是否成功接收了数据，也就无法触发高效的重传。
K1的配置遵循 “RRC预配置多个选项 + DCI动态指示” 的模式。

- 1. RRC 高层信令配置（预定义列表）
        - 网络可以通过 **RRCReconfiguration** 等RRC消息中的 **`PUCCH-Config`** IE 为UE配置一个可用的K1值列表。

        - 在38.331协议中：`UplinkConfig` -> **`PUCCH-Config`** 内，有一个叫做 **`dl-DataToUL-ACK`** 的字段。这个字段是一个列表，包含了多个可供选择的K1值（单位为时隙）。
        - ```plaintext
            PUCCH-Config ::= {
            ...
            dl-DataToUL-ACK                         SEQUENCE (SIZE (1..8)) OF INTEGER (0..15)                             OPTIONAL, -- Need M
            ...
            }
            ```


- 2. DCI 动态指示（指定具体值）
        - 在调度PDSCH的**下行授权DCI**（无论是DCI format 1\_0 还是 1\_1）中，都有一个专门的字段叫做 **PDSCH-to-HARQ feedback timing indicator** (38212),这个字段的值是一个索引（Index）**。
        - UE收到DCI后，用这个索引去查询RRC配置的 **`dl-DataToUL-ACK`** 列表，从而确定本次传输具体使用哪个K1值。


## 2.4 K2：PUSCH时域资源分配偏移量

**定义**

-   **K2** 指的是从**承载DCI（上行授权）的PDCCH所在时隙**到**该DCI所调度的PUSCH（承载上行数据的共享信道）所在时隙**之间的时间偏移。
    
-   **单位同样是时隙（Slot）**。
    
-   **公式表示**：`PUSCH时隙 = PDCCH时隙 + K2`
    

**具体含义**：  
当UE在一个时隙（时隙 `n`）中成功解码出一个上行授权DCI后，这个DCI告诉UE：“我允许你发送上行数据的时间，不是现在，而是在未来的 `K2` 个时隙之后，也就是时隙 `n + K2` 中。”

**配置位置**

K2的配置机制与K0完全类似，也采用“RRC配置表 + DCI动态索引”的方式：

- 1. RRC高层信令配置（预定义表格）：
        -   网络通过**RRC信令**为UE配置一个 **“PUSCH时域资源分配”表**。这个表中的每一行同样定义了 `K2`、PUSCH的起始符号和持续长度等参数。
        - 在38.331协议中 `UplinkConfig` -> `PUSCH-ServingCellConfig` -> `PUSCH-Config` -> **`pusch-TimeDomainAllocationList`**配置，格式如下：
        - ```plaintext
            PUSCH-TimeDomainResourceAllocation ::=  SEQUENCE {
                k2                                      INTEGER(0..32)                                  OPTIONAL,   -- Need S
                mappingType                             ENUMERATED {typeA, typeB},
                startSymbolAndLength                    INTEGER (0..127)
            }
            ```

- 2. DCI动态指示（索引）：
        - 在上行授权DCI（如DCI format 0\_0或0\_1）中，同样有一个 **“时域资源分配”** 字段。这个字段也是一个索引值。
        - UE根据这个索引，去查询配置好的“PUSCH时域资源分配”表，从而确定本次上行传输的具体 `K2` 值。
        - 例如：如果DCI指示索引为 `3`，UE查表得知 `K2 = 4`。这意味着UE需要在收到DCI后的第4个时隙（`n+4`）才能发送PUSCH


## 2.5 时序链举例


### 2.5.1 UE下行接收数据流程

-   **RRC配置：**
    
    -   PDSCH时域资源分配表: `K0` 可选 `{0, 2, 4}`
        
    -   HARQ反馈时序列表 (`dl-DataToUL-ACK`): `K1` 可选 `{3, 4, 6}`
        
-   **起始时隙：** `时隙 n`
    
-   **DCI格式：** DCI format 1\_1 (非回退下行授权)
    

**流程步骤：**

1.  **时隙 n: 网络下发调度指令 (PDCCH)**
    
    -   网络在时隙n的PDCCH信道上发送DCI。
        
    -   **DCI内容关键字段：**
        
        -   **时域资源分配字段:** 索引为0。
            
        -   **PDSCH-to-HARQ反馈时序字段:** 索引为2。
            
        -   **频域资源分配、MCS** 等字段。
            
2.  **时隙 n: UE接收并解析DCI**
    
    -   UE成功解码出DCI。
        
    -   UE查表得知：**`K0 = 2`**, **`K1 = 6`**。
        
    -   UE现在知道：
        
        -   数据将在 **时隙 n+2** 发送给我（PDSCH）。
            
        -   我必须在收到数据后的 **6个时隙内** 给出反馈。
            
3.  **时隙 n+2: UE接收下行数据 (PDSCH)**
    
    -   UE在时隙n+2，根据DCI指示的精确频域资源和调制编码方案，接收PDSCH信道上的数据。
        
    -   UE对数据进行解码。
        
4.  **时隙 n+2+6 = n+8: UE发送反馈 (PUCCH)**
    
    -   UE根据解码结果，在时隙n+8上通过PUCCH信道发送HARQ-ACK反馈。
        
    -   **如果解码成功 -> 发送 ACK**
        
    -   **如果解码失败 -> 发送 NACK**


```mermaid
timeline
    title UE下行接收数据流程
    section 时隙 n
        PDCCH : 网络发送DCI 1_1
        : UE解码得知 K0=2, K1=6
    section 时隙 n+2
        PDSCH : UE接收下行数据
    section 时隙 n+8
        PUCCH : UE发送HARQ-ACK反馈
```

### 2.5.2 UE上行发送数据流程

-   **RRC配置：**
    
    -   PUSCH时域资源分配表: `K2` 可选 `{1, 2, 4, 8}`
        
-   **起始时隙：** `时隙 m`
    
-   **DCI格式：** DCI format 0\_1 (非回退上行授权)
    

**流程步骤：**

1.  **时隙 m: 网络下发调度许可 (PDCCH)**
    
    -   网络在时隙m的PDCCH信道上发送DCI。
        
    -   **DCI内容关键字段：**
        
        -   **时域资源分配字段:** 索引为2。
            
        -   **频域资源分配、MCS** 等字段。
            
2.  **时隙 m: UE接收并解析DCI**
    
    -   UE成功解码出DCI。
        
    -   UE查表得知：**`K2 = 4`**。
        
    -   UE现在知道：
        
        -   我被允许在 **时隙 m+4** 发送上行数据（PUSCH）。
            
3.  **时隙 m ~ m+4: UE准备数据**
    
    -   UE在等待的这几个时隙内，根据DCI指示的MCS，将待发送的数据进行编码、调制，生成无线信号。***数据链路层关键时序要求***。
        
4.  **时隙 m+4: UE发送上行数据 (PUSCH)**
    
    -   UE在时隙m+4，精确地在DCI指示的频域资源和符号上，通过PUSCH信道将数据包发送给网络。


```mermaid
timeline
    title UE上行发送数据流程
    section 时隙 m
        PDCCH : 网络发送DCI 0_1
        : UE解码得知 K2=4
    section 时隙 m - m+4
        : UE准备待发送数据
    section 时隙 m+4
        PUSCH : UE发送上行数据
```

## 2.6 NDI

**新传 vs. 重传：NDI (New Data Indicator) 字段**

-   **字段位置**：在调度下行数据（PDSCH）的DCI（如Format 1\_0, 1\_1）和调度上行数据（PUSCH）的DCI（如Format 0\_0, 0\_1）中，都有一个1比特的NDI字段。
    
-   **工作原理**：
    
    -   **初始传输**：gNB（基站）要调度一次新的数据传输时，它会**翻转（Toggle）** NDI比特的值（即与上一次调度同一个HARQ进程的NDI值相比，0变1或1变0）。
        
    -   **重传**：gNB要调度一次重传时，它会**保持（Not Toggle）** NDI比特的值（即与上一次调度同一个HARQ进程的NDI值相同）。
        
-   **UE侧行为**：
    
    1.  UE成功解码DCI后，会读取其中的HARQ进程ID字段，找到对应的HARQ进程缓冲区。
        
    2.  UE将该DCI中的NDI值，与此HARQ进程中存储的上一次接收到的NDI值进行比较。
        
    3.  **如果两个值不同** -> 解释为 **“新传”** 。UE会清空该HARQ进程缓冲区的旧数据，准备存储新的传输块（TB），并期望收到一个全新的数据包。
        
    4.  **如果两个值相同** -> 解释为 **“重传”** 。UE不会清空缓冲区，而是将这次收到的新数据与之前缓存的失败数据进行合并（Combining），以提升解码成功率。
        

## 2.7 RV

**冗余版本 (RV - Redundancy Version) 字段**

-   **字段位置**：在包含调度信息的DCI（如DCI 1\_1, 0\_1）中，有一个2比特的RV字段。
    
-   **作用**：RV指示了本次传输所使用的比特选择起点。一个传输块（TB）经过信道编码（LDPC）后，会生成一个大的编码后比特流。RV定义了从哪个位置开始选取比特来组成本次发射的码字。不同的RV版本会发送系统比特和校验比特的不同组合。
    
    -   **RV = 0**：包含最多的**系统比特**，对于初始解码成功至关重要。
        
    -   **RV = 1, 2, 3**：包含更多的**校验比特**，用于重传时与之前接收的数据进行合并，以对抗不同的错误模式。
        
-   **UE侧行为**：
    
    1.  UE从DCI中提取出这2比特的RV值（例如 `00` 代表 RV=0, `01` 代表 RV=1，等等）。
        
    2.  UE根据RV值，知道本次接收的数据在整个编码比特流中的起始位置。
        
    3.  在进行LDPC解码时，UE会使用RV信息来正确地解速率匹配（De-rate-matching），即知道收到的这些比特对应原始编码流的哪一部分，从而进行正确的软比特合并和解码。
        

## 2.8 MCS 

**调制与编码策略 (MCS - Modulation and Coding Scheme) 字段**，5比特，在DCI（0_0, 0_1, 1_0, 1_1）都含有。

-   指示了本次传输所使用的调制方式（如 16QAM, 64QAM, 256QAM）和目标编码速率（Code Rate）。UE根据MCS索引查表，获得具体的调制阶数和TBS（传输块大小），从而知道如何解调和解码物理信道上的数据。



## 2.7 上行DCI传输指示


---

# 3 物理信号

## 3.1\. 解调参考信号 (DM-RS)

**Demodulation Reference Signal**

-   **功能**：用于**下行信道估计**，以便UE能够对PDSCH或PDCCH进行相干解调（简单说，就是补偿无线信道造成的失真）。
    
-   **特点**：
    
    -   **UE专属**：每个UE的DM-RS是独一无二的，基于其Cell-ID、RNTI、时频资源位置等参数生成，避免了用户间的干扰。
        
    -   **前置性**：DM-RS被放置在与其关联的PDSCH/PDCCH**相同的时频资源块内**，即“频带内”传输。这意味着UE可以基于DM-RS获知它所要解调的数据所经历的信道特性，非常精准。
        
    -   **可配置**：支持前端加载（Front-loaded），允许在符号的前端放置额外的DM-RS，以支持高速移动场景。
        

## 3.2\. 相位跟踪参考信号 (PT-RS)

**Phase-Tracking Reference Signal**

-   **功能**：用于**补偿高频段（如毫米波）通信中产生的相位噪声**。相位噪声会导致接收信号的相位随机抖动，尤其是在高频率和高阶调制（如256QAM, 1024QAM）下，这个问题尤为严重。
    
-   **特点**：
    
    -   **高密度时域，低密度频域**：通常在时域上每个符号都有，但在频域上间隔多个子载波。
        
    -   **依赖DM-RS**：PT-RS的端口与DM-RS端口存在准共址（QCL）关系，UE需要先通过DM-RS进行粗信道估计，再利用PT-RS进行更精细的相位跟踪。
        
    -   **按需配置**：并非所有场景都需要。通常在高频段和高阶调制时由网络配置并触发。
        

## 3.3\. 信道状态信息参考信号 (CSI-RS)

**Channel State Information Reference Signal**


### 3.3.1 核心功能与目的

CSI-RS的核心功能是供终端（UE）**对下行信道进行测量和特性估计**，并将测量结果以**信道状态信息（CSI）** 的形式反馈给基站（gNB）。gNB利用这些反馈信息做出智能的决策，从而实现**高频谱效率**和**高可靠性**的通信。

具体来说，其目的包括：

1.  **信道质量测量（CQI）**：UE测量CSI-RS的接收功率（RSRP）和信噪比（SINR），从而计算出**信道质量指示（CQI）**。gNB根据CQI为UE选择合适的**调制与编码策略（MCS）**。
    
2.  **波束管理与测量**：在毫米波等高频段，gNB使用多个波束覆盖小区。UE测量不同波束上发送的CSI-RS的信号质量，并向gNB报告**最佳波束**。gNB据此选择最优的发射/接收波束对，此过程称为**波束管理**。
    
3.  **空间特性测量（PMI/RI）**：
    
    -   **预编码矩阵指示（PMI）**：UE根据信道测量，向gNB推荐一个最优的**预编码矩阵**。这个矩阵用于gNB的波束赋形，使信号能量集中指向该UE。
        
    -   **秩指示（RI）**：UE建议gNB在当前信道条件下可同时传输的**数据流层数（Rank）**。RI=1代表单流传输（可靠性高），RI>1代表空间复用（速率高）。
        
4.  **时频跟踪**：用于辅助UE进行精细的时间同步和频率同步。
    
5.  **无线链路监测（RLM）**：UE通过持续测量CSI-RS来监控下行链路质量，判断是否处于同步失步（Out-of-Sync）或同步（In-Sync）状态，从而触发无线链路失败（RLF）等过程。
    


### 3.3.2 主要特点

1.  **高灵活性**：这是CSI-RS最显著的特点。其**带宽、端口数、密度、时频位置和周期**都高度可配置，可以完美适配不同场景（eMBB, URLLC, mMTC）的需求。
    
2.  **低开销**：与总是全带宽发送的LTE-CRS不同，CSI-RS可以按需在频域上**稀疏配置**（例如，每4个RB才配置1个），大大降低了信号开销。
    
3.  **波束赋形**：CSI-RS可以与SSB一样，**使用模拟波束进行发送**。每个CSI-RS资源都可以代表一个独立的波束，这是实现高频段波束管理的基础。
    
4.  **非UE专属与UE专属**：
    
    -   **非周期CSI-RS**：由DCI动态触发，用于按需的瞬时信道测量，时延低。
        
    -   **半持续CSI-RS（SP-CSI-RS）**：通过MAC-CE激活，通过DCI触发，用于周期性和动态性的平衡。
        
    -   **周期CSI-RS（P-CSI-RS）**：通过RRC配置其周期和偏移，长期存在，用于波束管理、RLM等。
        


### 3.3.3 关键概念与配置

#### 3.3.3.1 CSI-RS 资源（Resource）

一个CSI-RS资源在时频网格上占据一组特定的资源元素（RE）。它由以下参数定义：

-   **端口数（Number of Ports）**：可以是1、2、4、8、12、16、24、32。端口数越多，支持的空间维度（MIMO流数）就越高。
    
-   **时频密度（Density）**：例如，每个RB内每个端口占1个或0.5个RE。
    
-   **频域配置**：在频域上的位置（例如，配置的起始RB和带宽）。
    
-   **周期与偏移（对于周期/半持续CSI-RS）**：配置其出现的周期（如10, 20, 40, 80 slot）和 slot/符号偏移。
    

#### 3.3.3.2 CSI-RS 资源集（Resource Set）

一个资源集是**一个或多个CSI-RS资源的集合**。网络会为UE配置一个或多个资源集，每个资源集有特定用途：

-   **波束管理**：一个资源集中的多个资源通常代表**不同的发射波束**。UE需要测量集内所有资源，并报告信号最好的那个（基于L1-RSRP）。
    
-   **信道测量（用于CQI/PMI/RI上报）**：一个资源集通常只包含一个资源，UE基于该资源进行完整的CSI测量和上报。
    

#### 3.3.3.3 CSI 上报配置（Report Configuration）

这定义了UE**如何上报**、**上报什么**以及**何时上报**。它链接到一个CSI-RS资源集。

-   **上报类型**：
    
    -   **宽带上报**：对整个带宽给出一个整体的CQI/PMI。
        
    -   **子带上报**：将带宽分成多个子带，分别上报每个子带的CQI/PMI，更精细但开销大。
        
-   **上报内容**：可以是完整的CSI（CQI/PMI/RI），也可以只是波束测量结果（如SSBRI/CRI + L1-RSRP）。
    
-   **上报时机**：周期上报、半持续上报（由MAC-CE激活，DCI触发）、非周期上报（由DCI触发）。
    


### 3.3.4 工作流程举例：波束管理

1.  **配置**：gNB通过RRC信令为UE配置一个**CSI-RS资源集**，其中包含4个CSI-RS资源（代表4个不同的发射波束）。
    
2.  **测量**：gNB在4个波束上依次发射这4个CSI-RS资源。UE分别测量每个CSI-RS资源的信号质量（如L1-RSRP）。
    
3.  **上报**：UE将测量结果汇总，**选择信号最好的那个CSI-RS资源**（即最佳波束），并将其**索引（CRI）** 和对应的**RSRP值**反馈给gNB。
    
4.  **决策与调度**：gNB收到反馈后，得知哪个波束对该UE最佳。后续在向该UE发送PDSCH或PDCCH时，就使用这个最优波束进行发射，从而获得最高的信号增益。


        

## 3.4\. 主同步信号 (PSS) 和 辅同步信号 (SSS)

**Primary Synchronization Signal & Secondary Synchronization Signal**

-   **功能**：共同组成**SS/PBCH Block（SSB）**，是UE接入网络的第一步。
    
    -   **PSS**：帮助UE完成**符号同步**和**小区ID的一部分检测**（标识物理层小区ID组中的具体ID）。
        
    -   **SSS**：在PSS的基础上，帮助UE完成**帧同步**和**小区ID组的检测**。
        
    -   结合PSS和SSS，UE可以解出物理层小区ID（共1008个），并确定5ms定时边界。
        
-   **特点**：
    
    -   **固定模式**：在时频域上的位置相对固定（位于SSB的中心频点附近）。
        
    -   **周期性广播**：以固定的周期（如20ms）在多个波束上扫描发送，以实现小区覆盖。


UE开机的初始小区搜索流程”：

1.  **盲搜PSS**：UE在可能频点上扫描，寻找PSS信号。找到后，完成符号同步和部分PCI识别。
    
2.  **解码SSS**：根据PSS的位置，找到并解码SSS，完成帧同步和完整的PCI识别。至此，UE已经和小区实现了时频同步，并知道了小区的唯一身份标识（PCI）。
    
3.  **解码PBCH**：基于已知的PCI，UE可以解码PBCH，获取至关重要的MIB信息。
    
4.  **随机接入**：UE根据MIB中指示的`CORESET#0`配置，去监听PDCCH，以期找到调度SIB1的DCI。**只有成功解码SIB1**，UE才能获取到随机接入配置等信息，从而真正开始“连接”到网络（即随机接入过程）。



---

参考资料

[3GPP TS 38.212](https://www.3gpp.org/ftp/Specs/archive/38_series/38.213)

[3GPP TS 38.331](https://www.3gpp.org/ftp/Specs/archive/38_series/38.331)

《5G NR物理层规划与设计》

《5G移动通信系统设计与标准详解》

《5G技术核心与增强：从R15到R17》