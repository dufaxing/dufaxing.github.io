---
layout: post
title:  "5G NR物理层基础1（帧结构与物理资源）"
date:   2025-08-21 00:00:00
categories: NR
tags: 读书笔记
excerpt: 从数据链路层出发，经常接触到的一些物理层基本概念汇总
mathjax: true
---
* content
{:toc}
---

![KYHHbj.png](https://s2.ax1x.com/2019/10/23/KYHHbj.png)



> [博客地址](https://dufaxing.com){:target="_blank"}


> 缩写：
> - RE: Resource Element,资源元素,它是无线资源网格中一个最小的单位，由“1个OFDM符号”时长和“1个子载波”带宽唯一确定，是承载信息（如调制符号、参考信号）的物理实体。<br>
> - RB：Resource Block - 资源块。是网络调度和分配资源的基本单位，通常由频域上12个连续的子载波和时域上1个时隙（例如14个OFDM符号）组成。<br>
> - REG：Resource Element Group - 资源元素组。通常由同一OFDM符号上的几个连续RE组成，主要用于控制信道（如PDCCH）的映射。<br>
> - CCE：Control Channel Element - 控制信道元素。由多个REG组成，是PDCCH传输的资源单位。<br>



# 0 前言

    无线通信是共享媒介，所有用户都在相同的频段上通信。为了避免混乱，必须有一套极其精确的时域和频域规则来规定：什么时候发送？在哪个频率上发送？以什么格式发送？

---

# 1 调制与编码
    
-   **调制：** 将数字比特（你的数据）映射到模拟波形的过程。你必须熟悉 **QPSK, 16QAM, 64QAM, 256QAM** 甚至 **1024QAM**。理解不同调制方式的**星座图**，以及它们对信道质量的依赖（高阶调制需要更好的信噪比）。

-   **编码：** 为了对抗信道错误而添加冗余的过程。重点是 **LDPC码（5G数据信道）** 和 **Polar码（5G控制信道）**。理解**编码率**的概念，它决定了有效信息在总传输量中的占比。MAC层会根据物理层反馈的CQI来选择**MCS**，这直接关联了调制方式和编码率。

--- 

# 2 资源网格与帧结构

## 2.1 时域：

**帧 > 子帧 > 时隙 > 符号** 的分层时间结构。数据调度是以**时隙**或**微时隙**为基本单位的。
        

- **无线帧**
    
    -   **时长：** 10 ms
        
    -   **作用：** 最高层的时间基准。一个帧被分成10个**子帧**。
        
-  **子帧**
    -   **时长：** 1 ms
        
    -   **作用：** 在LTE中是调度的核心单位，在5G NR中其重要性下降，更多是作为一个时间参考（仪表中依然大量使用）。一个子帧可以包含1个或多个**时隙**。
        
- **时隙**
    - **时长：** **可变**的，这是5G相对于LTE的一个关键灵活性增强。
    - **组成：** 由**14个OFDM符号**（在常规循环前缀下）组成。
    - **可变性来源：** 时隙的长度取决于**子载波间隔**。
        - 子载波间隔越大，OFDM符号长度越短，一个时槽的持续时间也就越短。
        - 例如：`SCS=15 kHz -> 时隙=1 ms` | `SCS=30 kHz -> 时隙=0.5 ms` | `SCS=60 kHz -> 时隙=0.25 ms`
    - **作用：** **时隙是调度的核心时间单位之一**。MAC层调度器分配资源时，通常以时隙为基本单元。

- **符号**
    - **时长：** 一个时隙长度的 1/14（加上循环前缀CP后的小 overhead）。
    - **作用：** **最小的时域单位**。每个符号上可以承载一个调制符号（如QPSK符号、QAM符号）。它是资源网格中的一个最小“时间格子”。

**时域关系总结：**  

`帧 (10ms) -> 子帧 (1ms) -> 时隙 (可变，含14个符号) -> 符号 (最小单位)`

[![pVcd9G6.png](https://s21.ax1x.com/2025/08/31/pVcd9G6.png)](https://imgse.com/i/pVcd9G6)

[![pVcdCRK.png](https://s21.ax1x.com/2025/08/31/pVcdCRK.png)](https://imgse.com/i/pVcdCRK)





## 2.2频域

** 理解**载波带宽 > 资源块**的概念。一个**资源块**是频域上12个子载波、时域上1个时隙的基本调度单位。分配的TB（传输块）最终会被映射到特定的RB上。

频域结构是从小到大定义的：

- **子载波**

    - **宽度：** **可变**的（15kHz, 30kHz, 60kHz, 120kHz, 240kHz）。<br>
    - **作用：** **最小的频域单位**。它是OFDM技术的基础，将宽频带划分成大量窄带的、相互正交的子信道。每个子载波独立地进行窄带调制，共同组合成高速数据流。它是资源网格中的一个最小“频率格子”。<br>
        
- **资源块**

    - **定义：** **频域上12个连续的子载波**。<br>
    - **作用：** **资源调度的核心频域单位**。这是MAC层调度器分配资源时最常用的基本块。当你听说“基站给某个UE分配了5个RB”时，意思就是在频域上分配了5\*12=60个子载波供其使用。
    - **带宽：** 一个RB的带宽 = 12 \* 子载波间隔。例如，SCS=30kHz时，1个RB的带宽是 12 \* 30kHz = 360kHz。
- **带宽部分**
    - **定义：** 载波带宽内的一组连续的RB集合。
    - **作用：** 这是5G引入的一个重要概念，允许一个UE不需要支持整个小区的大带宽，而只需要在其活动的BWP上进行收发，极大地节省了功耗。MAC层会参与BWP的适配和切换。

**频域关系总结：**  
`子载波 (最小单位) -> 资源块 (RB = 12子载波) -> 带宽部分 (BWP = N个RB) -> 载波带宽`

#### 1.2.3 资源网格：时域与频域的结合

现在我们把时域和频域结合起来，就得到了资源网格。

- 资源网格
    - 定义： 一个资源网格可以看作一个二维表格。
    - 横轴（时域）： 代表时间，以一个时隙内的OFDM符号为最小单位（最多14列）。
    - 纵轴（频域）： 代表频率，以子载波为最小单位。但为了简化，通常以资源块为单位来描述（即每12行作为一个单元）。

- 资源元素
    - 定义： 资源网格中的一个最小单元，即1个子载波 x 1个OFDM符号的交叉点。
    - 作用： 这是承载一个调制符号（如一个QPSK或64QAM符号）的物理实体。参考信号（DM-RS）、控制信息、数据最终都是映射到一个个RE上的。

- 资源元素组
    - 定义： 一组RE的集合（例如，频域上连续的几个RE）。
    - 作用： 主要用于映射控制信道信息，是比RE大一点的映射单位。

一个时隙的资源网格就像一个有很多行（子载波/资源块）和14列（符号）的Excel表格。每个小格子就是一个RE。MAC层准备的数据（传输TB块）经过信道编码和调制后，生成的大量调制符号，按特定规则放入这个表格的格子里（资源映射）。

```plaintext
频域 (子载波索引，从低到高)
▲
│  ┌───┬───┬───┬───┬───┬───┬───┬───┬───┬───┬───┬───┬───┬───┐
│  │   │   │   │   │   │   │   │   │   │   │   │   │   │ 子载波 11
│  ├───┼───┼───┼───┼───┼───┼───┼───┼───┼───┼───┼───┼───┼───┤
│  │   │   │   │   │   │   │   │   │   │   │   │   │   │ 子载波 10
│  ├───┼───┼───┼───┼───┼───┼───┼───┼───┼───┼───┼───┼───┼───┤
│  │   │   │   │   │   │   │   │   │   │   │   │   │   │
│  ├───┼───┼───┼───┼───┼───┼───┼───┼───┼───┼───┼───┼───┼───┤
│  │   │   │   │   │   │   │   │   │   │   │   │   │   │
│  ├───┼───┼───┼───┼───┼───┼───┼───┼───┼───┼───┼───┼───┼───┤
│  │   │   │   │   │   │   │   │   │   │   │   │   │   │
│  ├───┼───┼───┼───┼───┼───┼───┼───┼───┼───┼───┼───┼───┼───┤
│  │   │   │   │   │   │   │   │   │   │   │   │   │   │
│  ├───┼───┼───┼───┼───┼───┼───┼───┼───┼───┼───┼───┼───┼───┤
│  │   │   │   │   │   │   │   │   │   │   │   │   │   │
│  ├───┼───┼───┼───┼───┼───┼───┼───┼───┼───┼───┼───┼───┼───┤
│  │   │   │   │   │   │   │   │   │   │   │   │   │   │
│  ├───┼───┼───┼───┼───┼───┼───┼───┼───┼───┼───┼───┼───┼───┤
│  │   │   │   │   │   │   │   │   │   │   │   │   │   │ 子载波 1
│  ├───┼───┼───┼───┼───┼───┼───┼───┼───┼───┼───┼───┼───┼───┤
└─►│   │   │   │   │   │   │   │   │   │   │   │   │   │   │ 子载波 0
   └───┴───┴───┴───┴───┴───┴───┴───┴───┴───┴───┴───┴───┴───┘
   ◄────────────────────── 时域 (OFDM符号索引) ──────────────────────►
     符号0  符号1 符号2 ...                      ...  符号13
```

上图显示的整个12x14的网格，就是一个资源块.
- 频域上：它包含了12个连续的子载波（从子载波0到11）。
- 时域上：它占据了一个完整的时隙（14个符号）。
- 一个RB包含的RE数：12个子载波 * 14个符号 = 168个RE（在常规循环前缀下）。

特殊区域：
- 控制区域：通常，每个时隙的前几个符号（如符号0、1）可能用于传输PDCCH（下行控制信息）。这些符号上的RE就不能用来传数据。
- 参考信号：网格中会分散地、有规律地插入一些特定的RE来放置参考信号（如DM-RS），用于信道估计和解调。这些RE也被预先占用了。

## 2.3 空域

理解**天线端口**和**层**的概念。这与MIMO技术强相关。

---

# 3 总结

作为数据链路层开发者，可以简单理解为：MAC层生成的传输块，经过编码、调制后变成一串调制符号。物理层的工作就是根据MAC的指令，将这一串符号精准地映射到这个RE上（避开已被控制信息和参考信号占用的格子），然后通过天线发射出去。


---

参考资料：

[sharetechnote-NR帧结构](https://www.sharetechnote.com/html/5G/5G_FrameStructure.html)

